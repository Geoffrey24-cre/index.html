const baseURL = "https://api.jsonbin.io/v3/b/";
        const collectionURL = "https://api.jsonbin.io/v3/c/6733735dacd3cb34a8a77607/bins";
        const headers = {
            "X-Master-Key": "$2a$10$2T0yr1CzfgagtTgJ7is1Vu7UjC8arWexIkD0rpZ/u9.6GTlx.ciji",
            "Content-Type": "application/json"
        };

        fetch(collectionURL, { headers })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok " + response.statusText);
                }
                return response.json();
            })
            .then(data => fetchAllBins(data))
            .then(binDataArray => {
                displayRecordTable(binDataArray);
            })
            .catch(error => {
                console.error("Fetch error:", error);
            });

        async function fetchAllBins(records) {
            const binDataArray = [];

            for (const item of records) {
                const binId = item.record;
                const url = ${baseURL}${binId};

                try {
                    const response = await fetch(url, { headers });
                    if (!response.ok) throw new Error(Failed to fetch bin ${binId}: ${response.statusText});

                    const binData = await response.json();
                    binDataArray.push(binData.record); // Extract only the record data
                } catch (error) {
                    console.error("Error fetching bin data:", error);
                }
            }

            return binDataArray;
        }

        function displayRecordTable(data) {
            const targetDiv = document.getElementById("data-table-div");

            let tableHTML = `
                <table>
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Section</th>
                            <th>Date</th>
                            <th>Time</th>
                        </tr>
                    </thead>
                    <tbody>
            `;

            data.forEach(record => {
                tableHTML += `
                    <tr>
                        <td>${record.name}</td>
                        <td>${record.section}</td>
                        <td>${record.date}</td>
                        <td>${record.time}</td>
                    </tr>
                `;
            });

            tableHTML += `
                    </tbody>
                </table>
            `;

            targetDiv.innerHTML = tableHTML;
        }
</body>

</html>
